"use strict";var eventsIndex=0,eventsLength=void 0,container=document.querySelector(".container"),showEvent=function(e){container.innerHTML+='<div class="event">\n                                <h2 class="event__title">Название: '+e.title+'</h2>\n                                <p class="event__price">Цена: '+e.price+'</p>\n                                <p class="event__date">Дата: '+e.datetime+"</p>\n                            </div>"},infiniteScroll=function e(){var t=Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight),n=document.querySelector(".spinner");if(window.pageYOffset+window.innerHeight==t){console.log("bingo"),eventsIndex+=5,console.log(eventsIndex),n.classList.remove("hidden");var s=new XMLHttpRequest;s.open("GET","events.json",!0),s.send(),s.onreadystatechange=function(){if(4==s.readyState)if(200!=s.status)alert(s.status+" : "+s.statusText);else{var t=JSON.parse(s.responseText);t=t.slice(eventsIndex,eventsIndex+5),t.forEach(showEvent),t.forEach(function(e){return console.log(e.title)}),n.classList.add("hidden"),eventsIndex>=eventsLength&&(console.log("ended"),window.removeEventListener("scroll",e))}}}},xhr=new XMLHttpRequest;xhr.open("GET","events.json",!0),xhr.send(),xhr.onreadystatechange=function(){if(4==xhr.readyState)if(200!=xhr.status)alert(xhr.status+" : "+xhr.statusText);else{var e=JSON.parse(xhr.responseText);eventsLength=e.length,console.log(eventsLength),e.length=5,e.forEach(showEvent)}},window.addEventListener("scroll",infiniteScroll);